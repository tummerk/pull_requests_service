# avito_test

# запуск
1) скопировать .env.dev в обычный .env
2) docker-compose up --build сделать)

# доп задания:
1) реализовал ручку для сбора статистики с кол-вом назначений у каждого пользователя
2) в loadTest.md указал результаты нагрузочного тестирования на основе k6
3) кейс следующий (спрашивал по почте сказали что как доп. задание):
   у pr не хватает ревьюеров
   после этого какому то юзеру из команды дают isActive true
   то есть появляется ещё один ревьюер потенциальный,
   нужно пускать какого нибудь Воркера который это отслеживает и ставит этого юзера в ревьюеры pr'ам которым не хватало
   Также это дополнительное задание можно дополнить и в обратную сторону: если ревьювер стал неактивен, надо найти другого.
   РЕШЕНИЕ: запустил воркера который читает события когда кто-то становится активным или наоборот и уже в зависимости от 
   этого приминяет нужные действия либо ищет замену в нужных prах, либо же ставит юзера в pr где их не хватает

# проблемы

1) время))
2) в /users/setIsActive требуется проверка на админский токен чтобы возвращать 401
   следовательно требуется некая авторизация, я скорее всего не успею её сделать за 4 дня + 
   она не включена в задание
3) тесты... проблема в том что юнит тесты бессмысленны т.к. вся бизнес логика реализованна именно на уровне репозитория, 
   да мб это плохо с точки зрения какой-то чистой архитектуры, но с другой стороны это даёт очень большой буст в производительности
   т.к. если бы мы тащили в in-memory вычисления огромные массивы из бд и уже с ними работали то это бы очень сильно жрало
   ресурсы( поэтомы выбрал вариант не делать unit тесты, да интеграционные бы как раз тут отлично подошли но на них нужно
   гораздо больше времени, не успею
   
